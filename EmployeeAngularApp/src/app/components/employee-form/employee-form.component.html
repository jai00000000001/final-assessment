<div class="container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <!-- Header -->
      <div class="text-center mb-4">
        <h1 class="display-6 text-primary">
          <i class="fas fa-user-plus me-2" *ngIf="!isEdit"></i>
          <i class="fas fa-user-edit me-2" *ngIf="isEdit"></i>
          {{ isEdit ? 'Edit Employee' : 'Add New Employee' }}
        </h1>
        <p class="text-muted">
          {{ isEdit ? 'Update employee information' : 'Fill in the details to add a new employee' }}
        </p>
      </div>

      <!-- Form Card -->
      <div class="card shadow-lg border-0">
        <div class="card-header bg-primary text-white">
          <h4 class="card-title mb-0">
            <i class="fas fa-info-circle me-2"></i>
            Employee Information
          </h4>
        </div>
        <div class="card-body p-4">
          <!-- Loading State -->
          <div *ngIf="loading" class="text-center py-5">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-muted">
              {{ isEdit ? 'Loading employee data...' : 'Processing...' }}
            </p>
          </div>

          <!-- Error Alert -->
          <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>

          <!-- Form -->
          <form *ngIf="!loading" (ngSubmit)="onSubmit()" #employeeForm="ngForm" class="needs-validation" novalidate>
            <div class="row">
              <div class="col-12 mb-4">
                <label for="name" class="form-label fw-bold">
                  <i class="fas fa-user me-2 text-primary"></i>Full Name *
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="name"
                  name="name"
                  [(ngModel)]="employee.name"
                  required
                  minlength="2"
                  placeholder="Enter employee's full name"
                  #name="ngModel"
                  [class.is-invalid]="name.invalid && (name.dirty || name.touched)"
                >
                <div *ngIf="name.invalid && (name.dirty || name.touched)" class="invalid-feedback">
                  <div *ngIf="name.errors?.['required']">
                    <i class="fas fa-exclamation-circle me-1"></i>Name is required.
                  </div>
                  <div *ngIf="name.errors?.['minlength']">
                    <i class="fas fa-exclamation-circle me-1"></i>Name must be at least 2 characters long.
                  </div>
                </div>
              </div>

              <div class="col-12 mb-4">
                <label for="address" class="form-label fw-bold">
                  <i class="fas fa-map-marker-alt me-2 text-primary"></i>Address *
                </label>
                <textarea
                  class="form-control form-control-lg"
                  id="address"
                  name="address"
                  [(ngModel)]="employee.address"
                  required
                  minlength="5"
                  rows="4"
                  placeholder="Enter employee's address"
                  #address="ngModel"
                  [class.is-invalid]="address.invalid && (address.dirty || address.touched)"
                ></textarea>
                <div *ngIf="address.invalid && (address.dirty || address.touched)" class="invalid-feedback">
                  <div *ngIf="address.errors?.['required']">
                    <i class="fas fa-exclamation-circle me-1"></i>Address is required.
                  </div>
                  <div *ngIf="address.errors?.['minlength']">
                    <i class="fas fa-exclamation-circle me-1"></i>Address must be at least 5 characters long.
                  </div>
                </div>
              </div>

              <div class="col-12 mb-4">
                <label for="salary" class="form-label fw-bold">
                  <i class="fas fa-dollar-sign me-2 text-primary"></i>Annual Salary *
                </label>
                <div class="input-group input-group-lg">
                  <span class="input-group-text bg-light">
                    <i class="fas fa-dollar-sign text-muted"></i>
                  </span>
                  <input
                    type="number"
                    class="form-control"
                    id="salary"
                    name="salary"
                    [(ngModel)]="employee.salary"
                    required
                    min="0"
                    step="0.01"
                    placeholder="0.00"
                    #salary="ngModel"
                    [class.is-invalid]="salary.invalid && (salary.dirty || salary.touched)"
                  >
                </div>
                <div *ngIf="salary.invalid && (salary.dirty || salary.touched)" class="invalid-feedback">
                  <div *ngIf="salary.errors?.['required']">
                    <i class="fas fa-exclamation-circle me-1"></i>Salary is required.
                  </div>
                  <div *ngIf="salary.errors?.['min']">
                    <i class="fas fa-exclamation-circle me-1"></i>Salary must be greater than 0.
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
              <button
                type="button"
                class="btn btn-outline-secondary btn-lg me-md-2"
                (click)="cancel()"
                [disabled]="loading"
              >
                <i class="fas fa-times me-2"></i>Cancel
              </button>
              <button
                type="submit"
                class="btn btn-primary btn-lg"
                [disabled]="employeeForm.invalid || loading"
              >
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
                <i class="fas fa-save me-2" *ngIf="!loading"></i>
                {{ isEdit ? 'Update Employee' : 'Create Employee' }}
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Help Text -->
      <div class="text-center mt-4">
        <small class="text-muted">
          <i class="fas fa-info-circle me-1"></i>
          All fields marked with * are required
        </small>
      </div>
    </div>
  </div>
</div>
